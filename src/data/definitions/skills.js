// src/data/definitions/skills.js
export const skills = {
    // --- ЖЕЛЕЗНЫЙ ВЕК ---
    basicForging: { name: "Основы ковки", description: "Каждый удар по наковальне становится на 1 ед. эффективнее.", icon: "hardware", cost: { matter: 20, sparks: 50 }, requires: [], apply: (state) => { state.progressPerClick += 1; } },
    sturdyPickaxe: { name: "Крепкая кирка", description: "Каждый удар по железной жиле приносит +1 дополнительную руду.", icon: "construction", cost: { matter: 40, ironOre: 20 }, requires: ["basicForging"], apply: (state) => { state.orePerClick += 1; } },
    apprenticeship: { name: "Наставничество", description: "Увеличивает эффективность работы подмастерьев на 10%.", icon: "engineering", cost: { matter: 50, sparks: 200 }, requires: ["basicForging"], apply: (state) => { state.passiveIncomeModifier += 0.1; } },
    efficientBellows: { name: "Эффективные меха", description: "Уменьшает затраты руды на 2 при плавке железа.", icon: "fireplace", cost: { matter: 60, ironIngots: 10 }, requires: ["basicForging"], apply: (state) => {} },
    fastHands: { name: "Быстрые руки", description: "Увеличивает скорость обработки компонентов на 10%.", icon: "speed", cost: { matter: 80, sparks: 300 }, requires: ["sturdyPickaxe"], apply: (state) => { state.smeltingSpeedModifier += 0.1; } },
    betterTools: { name: "Улучшенные инструменты", description: "Позволяет создавать более сложные железные изделия.", icon: "gite", cost: { matter: 100, ironIngots: 15 }, requires: ["apprenticeship"], apply: (state) => {} },
    advancedClients: { name: "Продвинутые клиенты", description: "Открывает доступ к более прибыльным заказам от авантюристов.", icon: "explore", cost: { matter: 90, sparks: 400 }, requires: ["efficientBellows"], apply: (state) => {} },
    enduranceTraining: { name: "Тренировка выносливости", description: "Повышает вашу выносливость, увеличивая прогресс за клик еще на 1.", icon: "fitness_center", cost: { matter: 120, sparks: 500 }, requires: ["betterTools", "advancedClients"], apply: (state) => { state.progressPerClick += 1; } },
    sturdyVice: { name: "Прочные Тиски", description: "Дает возможность создавать железные тиски, улучшающие работу на верстаке.", icon: "handyman", cost: { matter: 280, ironIngots: 60 }, requires: ["enduranceTraining"] },
    divisionOfLabor: { name: "Разделение труда", description: "Позволяет выбирать конкретный верстак для работы и открывает путь к узкой специализации.", icon: "groups", cost: { matter: 200, sparks: 800 }, requires: ["fastHands", "betterTools"], apply: (state) => {} },
    hammerStrength: { name: "Сила Молота", description: "Увеличивает прогресс работы на Наковальне на 10%.", icon: "hardware", cost: { matter: 250, ironIngots: 50 }, requires: ["divisionOfLabor"], apply: (state) => { state.workstationBonus.anvil += 0.1; } },
    preciseTools: { name: "Точные Инструменты", description: "Увеличивает прогресс работы на Верстаке на 10%.", icon: "handyman", cost: { matter: 250, sparks: 1000 }, requires: ["divisionOfLabor"], apply: (state) => { state.workstationBonus.workbench += 0.1; } },
    perfectGrinding: { name: "Идеальная Огранка", description: "Увеличивает прогресс работы на Точильном станке на 10%.", icon: "healing", cost: { matter: 250, ironIngots: 40 }, requires: ["divisionOfLabor"], apply: (state) => { state.workstationBonus.grindstone += 0.1; } },
    sharpeningStone: { name: "Точильный камень", description: "Увеличивает шанс критического удара в кузнице на 5%.", icon: "stream", cost: { matter: 300, sparks: 1500 }, requires: ["hammerStrength", "preciseTools", "perfectGrinding"], apply: (state) => { state.critChance += 0.05; } },
    advancedForging: { name: "Продвинутая ковка", description: "Увеличивает базовый прогресс за удар еще на 2 ед.", icon: "whatshot", cost: { matter: 350, ironIngots: 60 }, requires: ["hammerStrength", "preciseTools", "perfectGrinding"], apply: (state) => { state.progressPerClick += 2; } },
    geologicalSurvey: { name: "Геологоразведка", description: "Изучение старых карт намекает на существование других металлов.", icon: "map", cost: { matter: 200, sparks: 2000 }, requires: ["sharpeningStone", "advancedForging"], apply: (state) => {} },
    
    // --- МЕДНЫЙ ВЕК ---
    findCopper: { name: "Поиски Меди", description: "Открывает возможность добывать Медную руду и плавить Медные слитки. После изучения этого навыка вам предстоит выбрать специализацию.", icon: "filter_alt", cost: { matter: 300, sparks: 2500, ironIngots: 100 }, requires: ["geologicalSurvey"], apply: (state) => {} },
    copperProspecting: { name: "Разведка меди", description: "Увеличивает добычу медной руды вручную на 1 ед.", icon: "search", cost: { matter: 350, copperOre: 50 }, requires: ["findCopper"], apply: (state) => { state.orePerClick += 1; } },
    crucibleRefinement: { name: "Очистка в тигле", description: "Снижает стоимость плавки медных слитков на 2 ед. руды.", icon: "thermostat", cost: { matter: 380, copperIngots: 25 }, requires: ["findCopper"], apply: (state) => {} },
    jewelryCrafting: { name: "Ювелирное дело", description: "Даёт доступ к чертежам простых украшений из меди и бронзы. Требуется специализация Ювелира.", icon: "diamond", cost: { matter: 350, sparks: 3000, copperIngots: 30 }, requires: ["findCopper"], apply: (state) => {}, requiredSpecialization: 'jeweler', firstPlaythroughLocked: true },
    chainWeaving: { name: "Цепевязание", description: "Позволяет создавать прочные медные цепи.", icon: "link", cost: { matter: 420, copperIngots: 40 }, requires: ["findCopper"] },
    apprenticeTraining: { name: "Тренировка подмастерьев", description: "Эффективность всех подмастерьев увеличена на 15%.", icon: "engineering", cost: { matter: 400, sparks: 3500, ironIngots: 150 }, requires: ["copperProspecting", "crucibleRefinement"], apply: (state) => { state.passiveIncomeModifier += 0.15; }, requiredSpecialization: 'engineer' },
    qualityControl: { name: "Контроль качества", description: "Увеличивает шанс критического удара еще на 5%.", icon: "verified", cost: { matter: 450, copperIngots: 30 }, requires: ["crucibleRefinement"], apply: (state) => { state.critChance += 0.05; } },
    advancedSmelting: { name: "Продвинутая плавка", description: "Сокращает время плавки всех слитков на 20%.", icon: "local_fire_department", cost: { matter: 500, copperIngots: 50 }, requires: ["apprenticeTraining"], apply: (state) => { state.smeltingSpeedModifier += 0.2; } },
    smeltingAutomation: { name: "Автоматизация плавки", description: "Разблокирует очередь плавки, позволяя ставить до 3 предметов на автоматическую переплавку.", icon: "queue", cost: { matter: 750, sparks: 4500, copperIngots: 70 }, requires: ["advancedSmelting"], apply: (state) => { state.smeltingQueueCapacity = (state.smeltingQueueCapacity || 0) + 3; } },
    tradeRoutes: { name: "Торговые пути", description: "Увеличивает награду в Искрах и Материи еще на 15%.", icon: "alt_route", cost: { matter: 550, sparks: 4000, copperIngots: 60 }, requires: ["qualityControl"], apply: (state) => { state.sparksModifier += 0.15; state.matterModifier += 0.15; } },
    guildContracts: { name: "Контракты Гильдии", description: "Ваша репутация растет! Увеличивает шанс получения фракционных и редких заказов.", icon: "request_quote", cost: { matter: 600, sparks: 5000, copperIngots: 80 }, requires: ["tradeRoutes"], apply: (state) => {} },
    masterworkHammers: { name: "Мастерские молоты", description: "Увеличивает бонус критического удара на 5 ед.", icon: "build_circle", cost: { matter: 700, copperIngots: 100 }, requires: ["advancedSmelting", "guildContracts"], apply: (state) => { state.critBonus += 5; } },
    resourceExpert: { name: "Эксперт по Ресурсам", description: "Открывает доступ к поручениям гильдии, связанным с доставкой большого количества ресурсов.", icon: "inventory_2", cost: { matter: 1500, copperOre: 100, ironOre: 200 }, requires: ["geologicalSurvey"] },

    // --- БРОНЗОВЫЙ ВЕК ---
    artOfAlloys: { name: "Искусство Сплавов", description: "Открывает возможность создавать Бронзовые слитки и Слитки Искростали в Плавильне.", icon: "shield", cost: { matter: 800, sparks: 6000, copperIngots: 120 }, requires: ['masterworkHammers'], apply: (state) => {} },
    masterReforging: { name: "Мастер Перековки", description: "Открывает возможность улучшать качество созданных предметов с помощью перековки.", icon: "colorize", cost: { matter: 1000, bronzeIngots: 50 }, requires: ['artOfAlloys'], apply: (state) => {}, firstPlaythroughLocked: true },
    riskAssessment: { name: "Оценка Рисков", description: "Ваш опытный глаз теперь может определить точный шанс неудачи при улучшении предметов.", icon: "policy", cost: { matter: 1200, sparks: 8000, bronzeIngots: 20 }, requires: ['masterReforging'], firstPlaythroughLocked: true },
    steadyHand: { name: "Твердая Рука", description: "Снижает шанс неудачи при перековке, инкрустации и гравировке на 5% за уровень.", icon: "pan_tool", cost: { matter: 1500, bronzeIngots: 30, sparks: 10000 }, isMultiLevel: true, maxLevel: 3, baseCost: { matter: 1500, bronzeIngots: 30, sparks: 10000 }, costIncrease: 2.0, requires: ['riskAssessment'], firstPlaythroughLocked: true },
    reinforcedStructure: { name: "Уменьшение затрат", description: "Уменьшает затраты слитков/искр для всех компонентов на 1.", icon: "category", cost: { matter: 850, sparks: 6500, bronzeIngots: 50 }, requires: ["artOfAlloys"], apply: (state) => { state.componentCostReduction += 1; } },
    ancientKnowledge: { name: "Древние знания", description: "Увеличивает шанс критического удара еще на 5%.", icon: "auto_awesome", cost: { matter: 950, bronzeIngots: 70, sparks: 8000 }, requires: ["artOfAlloys"], apply: (state) => { state.critChance += 0.05; } },
    expeditionPlanning: { name: "Планирование экспедиций", description: "Открывает новые, более сложные типы заказов и клиентов с особыми требованиями.", icon: "map", cost: { matter: 1000, sparks: 9000, bronzeIngots: 80 }, requires: ["reinforcedStructure", "ancientKnowledge"], apply: (state) => {} },
    durableGear: { name: "Прочное Снаряжение", description: "Позволяет выполнять миссии гильдий, требующие более прочного снаряжения.", icon: "backpack", cost: { matter: 1000, ironIngots: 200 }, requires: ["expeditionPlanning"], apply: (state) => { state.missionMinQualityReduction = (state.missionMinQualityReduction || 0) + 0.5; } },
    gildingTechniques: { name: "Техники позолоты", description: "Увеличивает награды Искр и Материи еще на 15%.", icon: "attach_money", cost: { matter: 900, bronzeIngots: 40, sparks: 9500 }, requires: ["reinforcedStructure", "ancientKnowledge"], apply: (state) => { state.sparksModifier += 0.15; state.matterModifier += 0.15; } },
    legendaryClients: { name: "Легендарные клиенты", description: "Открывает доступ к самым прибыльным заказам и экзотическим материалам.", icon: "stars", cost: { matter: 1100, sparks: 12000, sparksteelIngots: 10 }, requires: ["expeditionPlanning"], apply: (state) => {} },
    optimizedSmelting: { name: "Оптимизированная плавка", description: "Ускоряет процесс плавки и ковки сплавов на 15%.", icon: "timer", cost: { matter: 1200, bronzeIngots: 90, sparks: 13000 }, requires: ["expeditionPlanning", "gildingTechniques"], apply: (state) => { state.smeltingSpeedModifier += 0.15; } },
    efficientCrafting: { name: "Эффективное ремесло", description: "Малые заказы теперь дают больше искр. (+20% к искрам от заказов)", icon: "local_gas_station", cost: { matter: 1250, sparks: 15000, sparksteelIngots: 15 }, requires: ["gildingTechniques"], apply: (state) => { state.sparksModifier += 0.2; } },
    matterAlchemy: { name: "Катализ Материи", description: "Изучение химических реакций, позволяющее извлекать больше чистой материи из побочных продуктов ковки (+20%).", icon: "bubble_chart", cost: { matter: 1300, sparksteelIngots: 20, sparks: 16000 }, requires: ["legendaryClients"], apply: (state) => { state.matterModifier += 0.2; } },
    tradeNegotiation: { name: "Торговые переговоры", description: "Улучшает отношения с торговцами, снижая цены на покупку и увеличивая на продажу на 5%.", icon: "storefront", cost: { matter: 1400, sparks: 18000, sparksteelIngots: 25 }, requires: ["optimizedSmelting"], apply: (state) => {} },
    artisanMentor: { name: "Наставник-Ремесленник", description: "Значительно увеличивает эффективность работы подмастерьев на 20%.", icon: "school", cost: { matter: 1500, sparksteelIngots: 30, sparks: 19000 }, requires: ["efficientCrafting"], apply: (state) => { state.passiveIncomeModifier += 0.2; } },
    specializedToolmaking: { name: "Специализированные Инструменты", description: "Открывает чертежи для создания точных механизмов и измерительных приборов.", icon: "build_circle", cost: { matter: 1450, sparks: 18500, sparksteelIngots: 28 }, requires: ["artisanMentor", "tradeNegotiation"], apply: (state) => {} },
    timeMastery: { name: "Мастерство Времени", description: "Увеличивает золотые и серебряные лимиты времени на заказах на 10%.", icon: "hourglass_empty", cost: { matter: 1600, sparks: 20000, sparksteelIngots: 35 }, requires: ["matterAlchemy"], apply: (state) => { state.timeLimitModifier += 0.1; } },
    truePotential: { name: "Истинный потенциал", description: "Ваша ковка становится еще совершеннее, увеличивая прогресс за клик на 3 и шанс крита на 5%.", icon: "bolt", cost: { matter: 2000, sparksteelIngots: 50, sparks: 25000 }, requires: ["artisanMentor", "specializedToolmaking", "timeMastery"], apply: (state) => { state.progressPerClick += 3; state.critChance += 0.05; } },
    guildContractsII: { name: "Гильдейские Контракты II", description: "Гильдия Торговцев признает ваше влияние. Открывает доступ к особым поручениям.", icon: "handshake", cost: { matter: 2000, sparks: 25000, sparksteelIngots: 50 }, requires: ["guildContracts", "truePotential"] },

    // --- МИФРИЛОВАЯ ЭПОХА ---
    mithrilProspecting: { name: "Поиски мифрила", description: "Позволяет находить и добывать мифриловую руду и плавить ее в слитки.", icon: "ac_unit", cost: { matter: 2000, sparks: 25000, sparksteelIngots: 60 }, requires: ['truePotential'], apply: (state) => {}, firstPlaythroughLocked: true },
    mithrilStrength: { name: "Сила Мифрила", description: "Увеличивает базовый прогресс за удар на 2 ед.", icon: "fitness_center", cost: { matter: 3000, mithrilIngots: 60, sparks: 40000 }, requires: ["mithrilProspecting"], apply: (state) => { state.progressPerClick += 2; } },
    mithrilDefense: { name: "Защита Мифрила", description: "Снижает стоимость всех компонентов на 2 ед.", icon: "shield", cost: { matter: 3200, mithrilIngots: 70, sparks: 42000 }, requires: ["mithrilStrength"], apply: (state) => { state.componentCostReduction += 2; } },
    mithrilSpeed: { name: "Скорость Мифрила", description: "Увеличивает скорость плавки и ковки сплавов на 20%.", icon: "speed", cost: { matter: 3400, mithrilIngots: 80, sparks: 44000 }, requires: ["mithrilDefense"], apply: (state) => { state.smeltingSpeedModifier += 0.2; } },
    mithrilFortune: { name: "Удача Мифрила", description: "Увеличивает шанс критического удара на 7%.", icon: "auto_awesome", cost: { matter: 3600, mithrilIngots: 90, sparks: 46000 }, requires: ["mithrilSpeed"], apply: (state) => { state.critChance += 0.07; } },
    mithrilMagic: { name: "Магия Мифрила", description: "Увеличивает бонус критического удара на 7 ед.", icon: "auto_fix_high", cost: { matter: 3800, mithrilIngots: 100, sparks: 48000 }, requires: ["mithrilFortune"], apply: (state) => { state.critBonus += 7; } },
    mithrilRegeneration: { name: "Регенерация Мифрила", description: "Увеличивает пассивную генерацию материи на 0.05/сек.", icon: "bubble_chart", cost: { matter: 4000, mithrilIngots: 110, sparks: 50000 }, requires: ["mithrilMagic"], apply: (state) => { state.passiveGeneration.matter = (state.passiveGeneration.matter || 0) + 0.05; } },
    mithrilCritStrike: { name: "Критический Удар Мифрила", description: "Ваши критические удары теперь дают шанс на дополнительный прогресс.", icon: "bolt", cost: { matter: 4200, mithrilIngots: 120, sparks: 52000 }, requires: ["mithrilRegeneration"], apply: (state) => { state.critBonusModifier = (state.critBonusModifier || 1.0) + 0.5; } },
    mithrilEvasion: { name: "Уклонение Мифрила", description: "Снижает шанс неудачи при улучшении предметов на 7%.", icon: "policy", cost: { matter: 4400, mithrilIngots: 130, sparks: 54000 }, requires: ["mithrilCritStrike"], apply: (state) => { state.riskModifier = (state.riskModifier || 1.0) * 0.93; } },
    mithrilArmor: { name: "Броня Мифрила", description: "Увеличивает эффективность работы подмастерьев на 25%.", icon: "engineering", cost: { matter: 4600, mithrilIngots: 140, sparks: 56000 }, requires: ["mithrilEvasion"], apply: (state) => { state.passiveIncomeModifier += 0.25; } },
    mithrilAttack: { name: "Атака Мифрила", description: "Увеличивает награду в Искрах и Материи еще на 25%.", icon: "attach_money", cost: { matter: 4800, mithrilIngots: 150, sparks: 58000 }, requires: ["mithrilArmor"], apply: (state) => { state.sparksModifier += 0.25; state.matterModifier += 0.25; } },
    ancientRuins: { name: "Древние Руины", description: "Открывает доступ к миссиям гильдии по исследованию опасных древних руин, где можно найти редкие материалы.", icon: "gavel", cost: { matter: 3000, mithrilIngots: 30, sparks: 40000 }, requires: ["mithrilProspecting", "expeditionPlanning"] },

    // --- ЭПОХА ЛЕГЕНД ---
    adamantiteMining: { name: "Добыча Адамантита", description: "Техники, позволяющие вскрывать адамантитовые жилы и плавить эту прочнейшую руду.", icon: "diamond", cost: {matter: 5000, sparks: 50000, mithrilIngots: 50 }, requires: ['mithrilAttack'], apply: (state) => {}, firstPlaythroughLocked: true },
    arcaneMetallurgy: { name: "Тайная металлургия", description: "Позволяет сплавлять металлы с чистой материей, создавая магический Арканит.", icon: "auto_fix_high", cost: {matter: 10000, sparks: 100000, adamantiteIngots: 30 }, requires: ['adamantiteMining'], apply: (state) => {}, firstPlaythroughLocked: true },
    legendaryStrength: { name: "Сила Легенды", description: "Увеличивает базовый прогресс за удар на 3 ед.", icon: "fitness_center", cost: { matter: 18000, arcaniteIngots: 10, sparks: 180000 }, requires: ["arcaneMetallurgy"], apply: (state) => { state.progressPerClick += 3; } },
    legendaryDefense: { name: "Защита Легенды", description: "Снижает стоимость всех компонентов на 3 ед.", icon: "shield", cost: { matter: 19000, arcaniteIngots: 12, sparks: 190000 }, requires: ["legendaryStrength"], apply: (state) => { state.componentCostReduction += 3; } },
    legendarySpeed: { name: "Скорость Легенды", description: "Увеличивает скорость плавки и ковки сплавов на 30%.", icon: "speed", cost: { matter: 20000, arcaniteIngots: 14, sparks: 200000 }, requires: ["legendaryDefense"], apply: (state) => { state.smeltingSpeedModifier += 0.3; } },
    legendaryFortune: { name: "Удача Легенды", description: "Увеличивает шанс критического удара на 10%.", icon: "auto_awesome", cost: { matter: 21000, arcaniteIngots: 16, sparks: 210000 }, requires: ["legendarySpeed"], apply: (state) => { state.critChance += 0.10; } },
    legendaryMagic: { name: "Магия Легенды", description: "Увеличивает бонус критического удара на 10 ед.", icon: "auto_fix_high", cost: { matter: 22000, arcaniteIngots: 18, sparks: 220000 }, requires: ["legendaryFortune"], apply: (state) => { state.critBonus += 10; } },
    legendaryRegeneration: { name: "Регенерация Легенды", description: "Увеличивает пассивную генерацию материи на 0.1/сек.", icon: "bubble_chart", cost: { matter: 23000, arcaniteIngots: 20, sparks: 230000 }, requires: ["legendaryMagic"], apply: (state) => { state.passiveGeneration.matter = (state.passiveGeneration.matter || 0) + 0.1; } },
    legendaryCritStrike: { name: "Критический Удар Легенды", description: "Ваши критические удары теперь дают шанс на значительно больший дополнительный прогресс.", icon: "bolt", cost: { matter: 24000, arcaniteIngots: 22, sparks: 240000 }, requires: ["legendaryRegeneration"], apply: (state) => { state.critBonusModifier = (state.critBonusModifier || 1.0) + 1.0; } },
    legendaryEvasion: { name: "Уклонение Легенды", description: "Снижает шанс неудачи при улучшении предметов на 10%.", icon: "policy", cost: { matter: 25000, arcaniteIngots: 24, sparks: 250000 }, requires: ["legendaryCritStrike"], apply: (state) => { state.riskModifier = (state.riskModifier || 1.0) * 0.90; } },
    legendaryArmor: { name: "Броня Легенды", description: "Увеличивает эффективность работы подмастерьев на 30%.", icon: "engineering", cost: { matter: 26000, arcaniteIngots: 26, sparks: 260000 }, requires: ["legendaryEvasion"], apply: (state) => { state.passiveIncomeModifier += 0.30; } },
    legendaryAttack: { name: "Атака Легенды", description: "Увеличивает награду в Искрах и Материи еще на 30%.", icon: "attach_money", cost: { matter: 27000, arcaniteIngots: 28, sparks: 270000 }, requires: ["legendaryArmor"], apply: (state) => { state.sparksModifier += 0.30; state.matterModifier += 0.30; } },
    secretOperations: { name: "Тайные Операции", description: "Открывает доступ к скрытным и рискованным заданиям гильдии, предлагающим необычные награды.", icon: "visibility_off", cost: { matter: 4000, adamantiteIngots: 10, sparks: 60000 }, requires: ["riskAssessment", "adamantiteMining"] },

    // --- НАВЫКИ ПЕРСОНАЛА ---
    unlockTrader: { name: "Торговые Представители", description: "Открывает возможность нанимать Торговцев для автоматической продажи товаров в вашей лавке.", icon: "storefront", cost: { matter: 800, sparks: 7000, copperIngots: 100 }, requires: ["tradeRoutes"], apply: (state) => {} },
    unlockManager: { name: "Управление Мастерской", description: "Открывает возможность нанимать Управителей для оптимизации расходов на персонал.", icon: "manage_accounts", cost: { matter: 1500, sparks: 15000, bronzeIngots: 80 }, requires: ["efficientCrafting"], apply: (state) => {} },
    unlockEngineer: { name: "Высшая Инженерия", description: "Открывает возможность нанимать Инженеров, которые повышают эффективность вашего ручного труда.", icon: "build", cost: { matter: 1800, sparks: 20000, sparksteelIngots: 20 }, requires: ["optimizedSmelting"], apply: (state) => {} },
    unlockAssistant: { name: "Личные Помощники", description: "Открывает возможность нанимать Ассистентов, которые улучшают взаимодействие с клиентами.", icon: "person_add", cost: { matter: 3000, sparks: 35000, mithrilIngots: 50 }, requires: ["mithrilProspecting"], apply: (state) => {} }
};